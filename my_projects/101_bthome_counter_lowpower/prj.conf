# Bluetooth Low Energy Configuration
CONFIG_BT=y
CONFIG_BT_PERIPHERAL=y
CONFIG_BT_DEVICE_NAME="BTHome LowPower"

# BTHome v2 Module Configuration
CONFIG_BTHOME=y
CONFIG_BTHOME_AUTO_MAC=y
CONFIG_BTHOME_DEVICE_NAME_MAX_LEN=20
CONFIG_BTHOME_MAX_MEASUREMENTS=5

# BTHome requires specific advertisement settings
CONFIG_BT_BROADCASTER=y
CONFIG_BT_EXT_ADV=n

# Bluetooth identity configuration
CONFIG_BT_PRIVACY=n
CONFIG_BT_SETTINGS=n
CONFIG_BT_ID_MAX=1

# Stelle sicher, dass Extended Advertising wirklich aus ist
CONFIG_BT_CTLR_ADV_EXT=n

# Allow connections (minimum 1 required by Zephyr)
CONFIG_BT_MAX_CONN=1

# Power Management Configuration (Nordic nRF52840 compatible)
CONFIG_PM=n
CONFIG_PM_DEVICE=n
CONFIG_PM_DEVICE_RUNTIME=n

# System Power Management - use basic sleep instead
# CONFIG_PM_S2RAM=y  # Not supported on nRF52840
# CONFIG_PM_POLICY_DEFAULT=y

# Minimal logging for power savings (keep printk for debugging)
CONFIG_LOG=y
CONFIG_LOG_DEFAULT_LEVEL=2
CONFIG_PRINTK=y
CONFIG_CONSOLE=y
CONFIG_UART_CONSOLE=y

# GPIO for optional LED control
CONFIG_GPIO=y

# System configuration (reduced stack sizes)
CONFIG_MAIN_STACK_SIZE=1536
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=1536
CONFIG_IDLE_STACK_SIZE=512

# Memory optimization for BTHome
CONFIG_BT_CTLR_RX_BUFFERS=1
CONFIG_BT_BUF_ACL_RX_SIZE=27
CONFIG_BT_BUF_ACL_TX_SIZE=27

# Disable unused features for power savings
CONFIG_SERIAL=y  # Keep for debugging
CONFIG_UART_INTERRUPT_DRIVEN=y

# Bluetooth power optimizations
CONFIG_BT_CTLR_TX_PWR_0=y