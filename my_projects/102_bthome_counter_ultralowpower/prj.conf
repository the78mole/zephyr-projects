# Bluetooth Low Energy Configuration - Ultra Low Power
CONFIG_BT=y
CONFIG_BT_DEVICE_NAME="BTHome Ultra"

# BTHome v2 Module Configuration
CONFIG_BTHOME=y
CONFIG_BTHOME_AUTO_MAC=y
CONFIG_BTHOME_DEVICE_NAME_MAX_LEN=15
CONFIG_BTHOME_MAX_MEASUREMENTS=3

# Aggressive Power Management (Nordic nRF52 compatible)
CONFIG_PM=n  # Not fully supported on nRF52840
CONFIG_PM_DEVICE=n
CONFIG_PM_DEVICE_RUNTIME=n

# Ultra minimal BT config - Broadcaster only  
CONFIG_BT_BROADCASTER=y
CONFIG_BT_PERIPHERAL=n
CONFIG_BT_EXT_ADV=n
CONFIG_BT_CTLR_ADV_EXT=n

# Bluetooth identity configuration
CONFIG_BT_PRIVACY=n
CONFIG_BT_SETTINGS=n
CONFIG_BT_ID_MAX=1

# Minimal BT buffers
CONFIG_BT_CTLR_RX_BUFFERS=1
CONFIG_BT_BUF_ACL_RX_SIZE=27
CONFIG_BT_BUF_ACL_TX_SIZE=27

# Bluetooth power optimizations
CONFIG_BT_CTLR_TX_PWR_0=y

# Clock optimization - Use internal RC oscillator
CONFIG_CLOCK_CONTROL_NRF_K32SRC_RC=y
CONFIG_CLOCK_CONTROL_NRF_K32SRC_20PPM=y

# RAM retention for persistent data (Nordic specific)
CONFIG_RETAINED_MEM=n  # Use manual retention instead
CONFIG_RETENTION=n

# Disable everything unnecessary for maximum power savings
CONFIG_SERIAL=n
CONFIG_CONSOLE=n
CONFIG_UART_CONSOLE=n
CONFIG_LOG=n
CONFIG_PRINTK=n
CONFIG_ASSERT=n
CONFIG_BOOT_BANNER=n

# GPIO minimal config
CONFIG_GPIO=y

# Ultra minimal system configuration
CONFIG_MAIN_STACK_SIZE=1024
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=1024
CONFIG_IDLE_STACK_SIZE=256

# Disable unused subsystems
CONFIG_SPI=n
CONFIG_I2C=n
CONFIG_USB_DEVICE_STACK=n
CONFIG_WATCHDOG=n

# Memory optimizations
CONFIG_HEAP_MEM_POOL_SIZE=0
CONFIG_MINIMAL_LIBC=y

# Thread optimizations
CONFIG_NUM_COOP_PRIORITIES=10
CONFIG_NUM_PREEMPT_PRIORITIES=5

# Interrupt optimizations
CONFIG_IRQ_OFFLOAD=n